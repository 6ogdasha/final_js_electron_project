<!DOCTYPE html>
<html>
<head>
	<title></title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>
<body style="background-image: url('main.jpg'); background-size: cover" id="body">
<!--main-->
<div class="main ">
		<img src="pers_main.png" style="position:absolute; height:600px; top:40%; left:60%; transition:1s; z-index: 2" class="pers">
	<div class="talk_main invisible">
		<img src="talk.png" style="position:absolute; height:425px; top:15%; left:40%; z-index:2">
		<p style="position:absolute; left:42%;top:22%; z-index: 2" class="talk_talk">Ешкин кот, остался последний учебный день. <br>мне осталось написать контрошу по матеше, <br>найти шпоры к химии и отсидеть биологию. <br>И я буду свободен! </p>
		<p style="position:absolute; left:42%;top:22%; display: none; z-index: 2" class="itog">Спасибо, что помогли!<br>Игра закончена! </p>
		<button class="btn bg-success text-light ok_button" style="position:absolute;top:37%; left:52%; z-index: 2">ok</button>

	</div>
	<div class="levels invisible">
		<button class="btn bg-info text-light font-weight-bold rounded-circle first_lvl_button position-absolute" style="top:40%;left:10%; z-index: 1">1</button>
		<button class="btn bg-info text-light font-weight-bold rounded-circle second_lvl_button position-absolute" style="left:48%;top:40%; z-index: 1">2</button>
		<button class="btn bg-info text-light font-weight-bold rounded-circle third_lvl_button position-absolute" style="left:55%;top:40%; z-index: 1">3</button>
	</div>
</div>


<div class="loc2 invisible">
	
		
			<div class="row ">
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px; width:150px; left:41%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px; width:150px; left:48%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px; width:150px; left:55%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
			</div>
	
		

		
			<div class="row" style="margin-top:160px;">
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px;width:150px; left:41%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px;width:150px; left:48%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px;width:150px; left:55%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
			</div>
		
		
		
			<div class="row" style="margin-top: 160px;">
				
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px;width:150px;left:41%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px;width:150px; left:48%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				<div class="col-3 border ml-2 unit mx-auto bg-light position-absolute" style="height:150px;width:150px; left:55%">
					<img src="loc2/o.png" style="display:none" class="o w-75">
					<img src="loc2/x.png" style="display:none" class="x w-75">
				</div>
				
				
			</div>
		
		
	
	<button class="btn invisible bg-info replay text-light font-weight-bold" style="position:absolute; left:70% top:20%; ">Повторить</button>
	<img src="loc2/pers.png" style="height:550px; position:absolute; left:25%;top:50%">
	<button class="btn bg-info text-light font-weight-bold go_back mt-5">Вернуться</button>
</div>

<div class="loc1 invisible">
	<img src="loc1/pers.png" style="height:550px; position:absolute; left:25%">
	<div class="talk_loc1 invisible">
		<img src="loc1/talk.png" style="position:absolute; height:325px; top:32%; left:37%">
		<p style="position:absolute; left:38%;top:35%">Аааааа тупая химия, <br>помогите найти спрятанные шпоры</p>
		
		<button class="btn bg-success text-light ok_button2" style="position:absolute;top:46%; left:45%">ok</button>
		
	</div>
	<div class="score_list invisible">
		<h1 class="text-light font-weight-bold">
			Шпоры:
			<span class="curr_score"></span>
		</h1>
	</div>
</div>

<div class="loc3 invisible">
		<div class="qs invisible">
			<img src="loc3/q1.png" class="position-absolute q" style="left:40%" id="1">
			<img src="loc3/q2.png" class="position-absolute invisible q" style="left:40%; top:40%" id="2">
			<img src="loc3/q3.png" class="position-absolute invisible q" style="left:38%" id="3">
			<img src="loc3/q4.png" class="position-absolute invisible q" style="left:38%" id="4">
			<img src="loc3/q5.png" class="position-absolute invisible q" style="left:38%" id="5">
			<h1 class="q position-absolute text-light font-weight-bold invisible" style="left:41%">Твоя оценка: <span class="mark" style="background:none"></span></h1>
		</div>
		
		<div class="otviti invisible">
			<input type="" name="" class="position-absolute form-control col-2" style="left:40%; top:60%" placeholder="Ответ сюда писать" >
			<button class="btn bg-info text-light position-absolute btn_otvet" style="left:53%; top:60%"> Ответить</button>
		</div>	
		
	<img src="loc2/pers.png" style="height:550px; position:absolute; left:25%">
</div>

<script type="text/javascript">
//main
	let pers = document.querySelector(".pers");
	let main_text = document.querySelector(".talk_main");
	let ok_button = document.querySelector(".ok_button");
	let levels = document.querySelector(".levels");
	let first_lvl = document.querySelector(".first_lvl_button");
	let second_lvl = document.querySelector(".second_lvl_button");
	let third_lvl = document.querySelector(".third_lvl_button");
	let loc2 = document.querySelector(".loc2");
	let loc3 = document.querySelector(".loc3")
	let main = document.querySelector(".main");
	let body = document.getElementById("body");
	let score = 0;
	let score_curr = document.querySelector(".curr_score");
	let win = [0,0,0];
	setTimeout(function(){
		main_text.classList.remove('invisible')
	},1500);
	let loc1toMain = function(){
		main.classList.remove("invisible");
		loc1.classList.add("invisible");
		pers.style.display = "block";
		body.style.backgroundImage = "url(main.jpg)";
		pers.style.left = "60%";
		pers.style.top = "40%";
	}
	let create = function(){
		for(let i = 0; i <= 7; i++){
				let img = document.createElement("img");
				loc1.appendChild(img);
				img.src = "loc1/paper.png";
				img.classList.add('position-absolute');
				img.style.height = "20px";
				img.style.left = Math.round(Math.random()*1920) + "px";
				img.style.top = Math.round(Math.random()*360+720) + "px";

				img.onclick = function(){
					score++;
					score_curr.innerHTML = score;
					img.style.display = "none";
					if (score == 8) {
						alert("победа, ты спас Богдана от химии.");
						win[0] = 1;
						setTimeout(loc1toMain,1500);
					}

				}
			
			}
	}

	let mainToLoc2 = function(){
		main.classList.add("invisible");
		loc2.classList.remove("invisible");
		pers.style.display = "none";
		body.style.backgroundImage = "url(loc2/bg.jpg)";
		setTimeout(function(){
			alert("Помоги Богдану скоротать время на биологии");
		},1500)

		

	}

	let loc2ToMain = function(){
		main.classList.remove("invisible");
		loc2.classList.add("invisible");
		pers.style.display = "block";
		body.style.backgroundImage = "url(main.jpg)";
		pers.style.left = "60%";
		pers.style.top = "40%";
	}
	let mainToLoc1 = function(){
		main.classList.add("invisible");
		loc1.classList.remove("invisible");
		pers.style.display = "none";
		body.style.backgroundImage = "url(loc1/bg.jpg)"
	}
	ok_button.onclick = function(){
		main_text.classList.add('invisible');
		levels.classList.remove('invisible');
	}

	first_lvl.onclick = function(){
		pers.style.left = "10%";
		pers.style.top = "35%";
		setTimeout(mainToLoc1,1000);
		setTimeout(function(){
			talk_loc1.classList.remove("invisible");
		},2000)
	}


	second_lvl.onclick = function(){
		pers.style.left = "45%";
		pers.style.top = "35%";
		setTimeout(mainToLoc2,1000);
		

	}



	third_lvl.onclick = function(){
		pers.style.left = "48%";
		pers.style.top = "30%";
		setTimeout(mainToLoc3,1000)
	}
//loc2
	let arr_x = document.querySelectorAll(".x");
	let arr_o = document.querySelectorAll(".o");
	let btn_replay = document.querySelector(".replay");
	let btn_go_back = document.querySelector(".go_back");


	let units = document.querySelectorAll(".unit");

	let checking = [0,0,0,0,0,0,0,0,0];
	let checking_x = [0,0,0,0,0,0,0,0,0];
	let checking_o = [0,0,0,0,0,0,0,0,0];
	let check = 0;
	


	let bot = function(){
		let random_unit = Math.round(Math.random()*8);
		if (checking[random_unit] != 1){
			arr_x[random_unit].style.display = "block";
			checking[random_unit] = 1;
			checking_x[random_unit] = 1;
			if(checking_x[0] == 1 && checking_x[1] == 1 && checking_x[2] == 1){
				units[0].classList.remove('bg-light');
				units[1].classList.remove('bg-light');
				units[2].classList.remove('bg-light');

				units[0].classList.add('bg-danger');
				units[1].classList.add('bg-danger');
				units[2].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[3] == 1 && checking_x[4] == 1 && checking_x[5] == 1){
				units[3].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[5].classList.remove('bg-light');

				units[3].classList.add('bg-danger');
				units[4].classList.add('bg-danger');
				units[5].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[6] == 1 && checking_x[7] == 1 && checking_x[8] == 1){
				units[6].classList.remove('bg-light');
				units[7].classList.remove('bg-light');
				units[8].classList.remove('bg-light');

				units[6].classList.add('bg-danger');
				units[7].classList.add('bg-danger');
				units[8].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[0] == 1 && checking_x[3] == 1 && checking_x[6] == 1){
				units[0].classList.remove('bg-light');
				units[3].classList.remove('bg-light');
				units[6].classList.remove('bg-light');

				units[0].classList.add('bg-danger');
				units[3].classList.add('bg-danger');
				units[6].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[1] == 1 && checking_x[4] == 1 && checking_x[7] == 1){
				units[1].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[7].classList.remove('bg-light');

				units[1].classList.add('bg-danger');
				units[4].classList.add('bg-danger');
				units[7].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[2] == 1 && checking_x[5] == 1 && checking_x[8] == 1){
				units[2].classList.remove('bg-light');
				units[5].classList.remove('bg-light');
				units[8].classList.remove('bg-light');

				units[2].classList.add('bg-danger');
				units[5].classList.add('bg-danger');
				units[8].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[0] == 1 && checking_x[4] == 1 && checking_x[8] == 1){
				units[0].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[8].classList.remove('bg-light');

				units[0].classList.add('bg-danger');
				units[4].classList.add('bg-danger');
				units[8].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			} else if(checking_x[2] == 1 && checking_x[4] == 1 && checking_x[6] == 1){
				units[2].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[6].classList.remove('bg-light');

				units[2].classList.add('bg-danger');
				units[4].classList.add('bg-danger');
				units[6].classList.add('bg-danger');
				setTimeout(function(){alert("хаха проиграл ты");btn_replay.classList.remove('invisible')},1000);
			}
		} else bot();	

	
	}

	
	for(let i = 0; i <= 8; i++){
		if (checking[i] != 1){
			units[i].onclick = function(){
				arr_o[i].style.display = "block";
				checking[i] = 1;
				checking_o[i] = 1;

				if(checking_o[0] == 1 && checking_o[1] == 1 && checking_o[2] == 1){
				units[0].classList.remove('bg-light');
				units[1].classList.remove('bg-light');
				units[2].classList.remove('bg-light');

				units[0].classList.add('bg-success');
				units[1].classList.add('bg-success');
				units[2].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[3] == 1 && checking_o[4] == 1 && checking_o[5] == 1){
				units[3].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[5].classList.remove('bg-light');

				units[3].classList.add('bg-success');
				units[4].classList.add('bg-success');
				units[5].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[6] == 1 && checking_o[7] == 1 && checking_o[8] == 1){
				units[6].classList.remove('bg-light');
				units[7].classList.remove('bg-light');
				units[8].classList.remove('bg-light');

				units[6].classList.add('bg-success');
				units[7].classList.add('bg-success');
				units[8].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[0] == 1 && checking_o[3] == 1 && checking_o[6] == 1){
				units[0].classList.remove('bg-light');
				units[3].classList.remove('bg-light');
				units[6].classList.remove('bg-light');

				units[0].classList.add('bg-success');
				units[3].classList.add('bg-success');
				units[6].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[1] == 1 && checking_o[4] == 1 && checking_o[7] == 1){
				units[1].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[7].classList.remove('bg-light');

				units[1].classList.add('bg-success');
				units[4].classList.add('bg-success');
				units[7].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[2] == 1 && checking_o[5] == 1 && checking_o[8] == 1){
				units[2].classList.remove('bg-light');
				units[5].classList.remove('bg-light');
				units[8].classList.remove('bg-light');

				units[2].classList.add('bg-success');
				units[5].classList.add('bg-success');
				units[8].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[0] == 1 && checking_o[4] == 1 && checking_o[8] == 1){
				units[0].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[8].classList.remove('bg-light');

				units[0].classList.add('bg-success');
				units[4].classList.add('bg-success');
				units[8].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else if(checking_o[2] == 1 && checking_o[4] == 1 && checking_o[6] == 1){
				units[2].classList.remove('bg-light');
				units[4].classList.remove('bg-light');
				units[6].classList.remove('bg-light');

				units[2].classList.add('bg-success');
				units[4].classList.add('bg-success');
				units[6].classList.add('bg-success');
				win[1] = 1;
				setTimeout(function(){alert("изи победа");btn_replay.classList.remove('invisible')},1000);
				} else setTimeout(bot,1000);
				
			}
		}
		
	}

	let replay = function(){
		for(let i = 0; i <=8; i++){
			checking[i] = 0;
			checking_x[i] = 0;
			checking_o[i] = 0;
			units[i].classList.remove('bg-success');
			units[i].classList.remove('bg-danger');
			units[i].classList.add('bg-light')
			arr_x[i].style.display = "none";
			arr_o[i].style.display = "none";

		}
		btn_replay.classList.add('invisible')
	}
	btn_replay.onclick = function(){
		replay();
	}
	btn_go_back.onclick = function(){
		loc2ToMain();
	}

//loc3

	let loc1 = document.querySelector(".loc1")
	let talk_loc1 = document.querySelector(".talk_loc1");
	let ok_btn2 = document.querySelector(".ok_button2");
	let score_list = document.querySelector(".score_list");
	let otviti = document.querySelector(".otviti");
	let qs = document.querySelector(".qs");
	let btn_otvet = document.querySelector(".btn_otvet");
	let input = document.querySelector(".form-control");
	let q_arr = document.querySelectorAll(".q");
	let answers = [], correct_answers = ["105","1000","110","2","-250"];
	let curr_mark = 0;
	let k = 0;
	let mark = document.querySelector(".mark");

	let loc3toMain = function(){
		main.classList.remove("invisible");
		loc3.classList.add("invisible");
		pers.style.display = "block";
		body.style.backgroundImage = "url(main.jpg)";
		pers.style.left = "60%";
		pers.style.top = "40%";
		if (win[0] == 1 && win[1] == 1 && win[2] == 1){
			main_text.classList.remove("invisible");
			document.querySelector(".talk_talk").style.display = "none"
			document.querySelector(".itog").style.display = "block";
		}
	}

	btn_otvet.onclick = function(){

		answers[k] = input.value;
		q_arr[k].classList.add("invisible");
		q_arr[k+1].classList.remove("invisible");
		k++;
		if (k == 5){
			for(let i = 0; i < 5; i++){
				if (answers[i] == correct_answers[i]) curr_mark++;
			}
			if (curr_mark<2) curr_mark = 2;
			otviti.classList.add("invisible")
			win[2] = 1;
			mark.innerHTML = curr_mark;
			setTimeout(loc3toMain,2000);
		}
		//h1 with innerHTML
	}

	ok_btn2.onclick = function(){
		talk_loc1.classList.add("invisible");
		create();
		score_list.classList.remove('invisible');
		

	}
	let mainToLoc3 = function(){
			main.classList.add("invisible");
			loc3.classList.remove("invisible");
			pers.style.display = "none";
			body.style.backgroundImage = "url(loc3/bg.jpg)";
			setTimeout(function(){
				alert("Осталось помочь Богдану с контрошей по матеше и учебный год закончится");
				qs.classList.remove("invisible");
				otviti.classList.remove("invisible");
				
			},1500)
		}
</script>
</body>
</html>